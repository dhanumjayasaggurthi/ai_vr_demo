<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Dental AI VR</title>
<meta name="viewport" content="width=device-width">

<script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/aframe-environment-component@1.3.4/dist/aframe-environment-component.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/aframe-super-hands-component@5.0.2/dist/aframe-super-hands.min.js"></script>

<style>
body { margin:0; background:#000; }
</style>
</head>

<body>
<a-scene
  loading-screen="enabled: false"
  background="color: #000"
  renderer="antialias: true"
  vr-mode-ui="enabled: true"
  webxr="optionalFeatures: local-floor">

<!-- LIGHTING -->
<a-entity light="type: ambient; intensity: 0.4"></a-entity>
<a-entity light="type: directional; intensity: 1.2" position="5 10 5"></a-entity>

<!-- ENVIRONMENT -->
<a-entity environment="
  preset: sci-fi;
  ground: flat;
  grid: cross;
  gridColor: #00ffff;
  groundColor: #020914;
  skyColor: #000">
</a-entity>

<!-- CAMERA -->
<a-entity id="rig" position="0 1.6 4">
  <a-camera></a-camera>
  <a-entity hand-controls="left" super-hands></a-entity>
  <a-entity hand-controls="right" super-hands></a-entity>
</a-entity>

<!-- START BUTTON -->
<a-entity id="startUI" position="0 1.6 -2">
  <a-box id="startBtn"
    width="2.5" height="0.6" depth="0.2"
    color="#00ffff"></a-box>

  <a-text value="ENTER EXPERIENCE"
    position="0 0 0.15"
    align="center"
    color="#000"
    width="4"></a-text>
</a-entity>

<!-- AI AVATAR -->
<a-entity id="aiRoom" position="0 1.6 -8" visible="false">
  <a-sphere radius="0.45"
    material="color:#00ffff; emissive:#00ffff"
    animation="property: scale; from: 0 0 0; to: 1 1 1; dur: 2000"
    grabbable hoverable>
  </a-sphere>
</a-entity>

<script>
document.querySelector('#startBtn').addEventListener('click', () => {

  // Hide UI
  document.querySelector('#startUI').setAttribute('visible', false);
  document.querySelector('#aiRoom').setAttribute('visible', true);

  // Create audio AFTER interaction
  const voice = document.createElement('a-entity');
  voice.setAttribute('sound', {
    src: 'url(audio_narrations/scene1.mp3)',
    autoplay: true,
    positional: true,
    refDistance: 1,
    maxDistance: 20
  });

  document.querySelector('a-scene').appendChild(voice);
});
</script>

</a-scene>
</body>
</html>
